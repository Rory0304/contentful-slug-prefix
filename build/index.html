<!doctype html><head><link href="https://static.contentful.com/app/main-62e0abc7.css" media="all" rel="stylesheet" type="text/css"><link href="https://static.contentful.com/app/vendor-976872d7.css" media="all" rel="stylesheet" type="text/css"><link href="https://contentful.github.io/ui-extensions-sdk/cf-extension.css" media="all" rel="stylesheet" type="text/css"><script type="text/javascript" src="https://unpkg.com/contentful-ui-extensions-sdk@3"></script></head><div class="widget-slug-editor"> <input id="slug" type="text" class="form-control" style="width:98%;font-size:14px"> <i id="error" class="fa fa-exclamation-triangle is-slug-duplicate"></i> <i id="ok" class="fa fa-check-circle is-slug-unique"></i> <i id="loading" class="fa fa-spin fa-spinner"></i> </div><script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/3.0.2/es6-promise.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/speakingurl/7.0.0/speakingurl.min.js"></script><script>const e=/[`~!@#$%^&*()_|+\-=?;:'",. <>\\{\\}\\[\]\\\\/]/g,n=/\s+/g;var t=window.contentfulExtension||window.contentfulWidget;t.init(function(t){var o=t.field,i=t.contentType.displayField,d=t.entry.fields[i],l=window._,r=l.debounce(a,500),s=document.getElementById("slug"),u={error:document.getElementById("error"),ok:document.getElementById("ok"),loading:document.getElementById("loading")};function c(t){var i,d;console.log(t),i=(d=t||"",d.replace(/ <\/?[^>]+(>|$)/g,"")).replace(e,"").replace(n,"-").toLowerCase(),console.log("pre",i),s.value=i,o.setValue(i),g("loading"),r(i)}function a(e){(function(e){if(!e)return Promise.resolve(!1);var n={};return n.content_type=t.entry.getSys().contentType.sys.id,n["fields."+o.id]=e,n["sys.id[ne]"]=t.entry.getSys().id,n["sys.publishedAt[exists]"]=!0,t.space.getEntries(n).then(function(e){return e.total>0})})(e).then(function(e){g(e?"error":"ok")})}function g(e){l.each(u,function(n,t){n.style.display=t===e?"inline":"none"})}t.window.updateHeight(),d.onValueChanged(c),s.addEventListener("input",function(){c(s.value)}),s.addEventListener("change",function(){c(s.value)}),a(o.getValue())});</script>